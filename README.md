# cIPR
 将域名转为ip段权重

> 第一次使用回自动下载 `qqwry.dat` 和生成配置文件，不好的网络环境会影响使用

## 用法

```
admin@admin cIPR % go run cIPR.go domain.txt

 ▄████████  ▄█     ▄███████▄    ▄████████ 
███    ███ ███    ███    ███   ███    ███ 
███    █▀  ███▌   ███    ███   ███    ███ 
███        ███▌   ███    ███  ▄███▄▄▄▄██▀ 
███        ███▌ ▀█████████▀  ▀▀███▀▀▀▀▀   
███    █▄  ███    ███        ▀███████████ 
███    ███ ███    ███          ███    ███ 
████████▀  █▀    ▄████▀        ███    ███ 
                               ███    ███
											v0.0.1
	https://github.com/canc3s/cIPR
www.xxx.com 	 [103.x.x.x]
test.xxx.com 	 [103.x.x.x]

...

124.x.x.0/24 || 194
223.x.x.0/24 || 74
219.x.x.0/24 || 51
106.x.x.0/24 || 37
111.x.x.0/24 || 37
202.x.x.0/24 || 34
103.x.x.0/24 || 25
1.x.x.0/24 || 21
103.x.x.0/24 || 15
101.x.x.0/24 || 12
125.x.x.0/24 || 8
112.x.x.0/24 || 8
210.x.x.0/24 || 6
27.x.x.0/24 || 6
124.x.x.0/24 || 5
42.x.x.0/24 || 5
106.x.x.0/24 || 5
58.x.x.0/24 || 4
221.x.x.0/24 || 3
219.x.x.0/24 || 2
118.x.x.0/24 || 2
220.x.x.0/24 || 2
124.x.x.0/24 || 2
123.x.x.0/24 || 2
36.x.x.0/24 || 2
59.x.x.0/24 || 1
58.x.x.0/24 || 1
106.x.x.0/24 || 1
211.x.x.0/24 || 1
123.x.x.0/24 || 1
```
或者
```
admin@admin cIPR % go run cIPR.go -t 20 domain.txt
```

## config.yml

```yaml
datPath: ./qqwry.dat    #qqwry.dat的位置
blackList:              #ip段黑名单
    - 阿里巴巴
    - CDN
    - 局域网
    - 美国
    - 阿里
    - Azure
    - 华为
    - 腾讯
    - Microsoft
    - 微软
    - 网宿
    - Amazon
```

该黑名单屏蔽了cnd和一些云服务器，使用时可以自行调节设置。

## Changelog

[+] 2023/03/14 增加利用环境变量 `CIPR_Conf` 设置配置文件路径功能。(详情见https://github.com/canc3s/cIPR/issues/1)

[+] 2021/09/08 增加并发选项。但实际速度还取决于dns服务器等解析速度。

## Thanks

- [Nali](https://github.com/zu1k/nali)

- [纯真QQIP离线数据库](http://www.cz88.net/fox/ipdat.shtml)
